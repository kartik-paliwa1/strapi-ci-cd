import {
  getDisplayName,
  getInitials
} from "./chunk-V2356YN3.js";
import {
  useGetCountDocumentsQuery,
  useGetKeyStatisticsQuery
} from "./chunk-4JEMFY4B.js";
import "./chunk-P4MW56JB.js";
import "./chunk-MXUJETMG.js";
import "./chunk-ILTK455Q.js";
import {
  Widget
} from "./chunk-JVLPB7TF.js";
import "./chunk-UIAWNFPX.js";
import "./chunk-7PUUZZBB.js";
import "./chunk-OHBWTDYV.js";
import "./chunk-6LEA5NNP.js";
import "./chunk-ZJ3Q2ZXE.js";
import "./chunk-TZLCSQ7D.js";
import "./chunk-4Z4ICZDS.js";
import "./chunk-5YGMMZHP.js";
import "./chunk-XWWS33TK.js";
import "./chunk-MOVIDLV3.js";
import "./chunk-MMFIWMIJ.js";
import "./chunk-VPZPUWHH.js";
import "./chunk-SHHZGTRU.js";
import "./chunk-7R3IEP5O.js";
import "./chunk-DTPLHC4Y.js";
import "./chunk-PZ6PIJ5R.js";
import "./chunk-BALFEYRP.js";
import "./chunk-GJKFT6EX.js";
import "./chunk-HP6PMHBS.js";
import "./chunk-6VU4ULW6.js";
import "./chunk-NZF6ERMF.js";
import "./chunk-KU3X5RH2.js";
import "./chunk-MZOBPZQ3.js";
import "./chunk-GTK7A75H.js";
import "./chunk-6QQ5Y257.js";
import "./chunk-MXOCLXDI.js";
import "./chunk-PM2LZIAE.js";
import "./chunk-H5MBP66A.js";
import "./chunk-53SLEXFN.js";
import "./chunk-FMI7IV2L.js";
import "./chunk-CLBB5XWA.js";
import {
  useTracking
} from "./chunk-X755HR2R.js";
import "./chunk-BC6C3P2K.js";
import "./chunk-5RZ6LKW6.js";
import "./chunk-DJ2H7J6F.js";
import "./chunk-KYOQACZ3.js";
import "./chunk-GH6VCESI.js";
import {
  useAuth
} from "./chunk-Q5ERACUA.js";
import "./chunk-N64PMPD5.js";
import "./chunk-5BKV6XT7.js";
import "./chunk-ZOFH3G6M.js";
import "./chunk-T53VNMA3.js";
import "./chunk-NLF5ZJ7G.js";
import "./chunk-FFDAF6WU.js";
import "./chunk-LJ3JYJIM.js";
import "./chunk-SPCPB6JM.js";
import {
  Avatar,
  Badge,
  Box,
  Flex,
  Typography,
  useIntl
} from "./chunk-DOD64YWE.js";
import "./chunk-75I5DWRQ.js";
import {
  Link
} from "./chunk-QOSJGLB6.js";
import "./chunk-47RN6QNY.js";
import {
  ForwardRef$2B,
  ForwardRef$2D,
  ForwardRef$2N,
  ForwardRef$3,
  ForwardRef$3X,
  ForwardRef$3h,
  ForwardRef$3r,
  ForwardRef$d
} from "./chunk-UZEUHNNF.js";
import {
  require_jsx_runtime
} from "./chunk-GAPF2DTI.js";
import {
  dt
} from "./chunk-FJZ2NJT6.js";
import "./chunk-2ZN62OJX.js";
import {
  __toESM
} from "./chunk-X6GFWOGJ.js";

// ../packages/core/admin/admin/src/components/Widgets.tsx
var import_jsx_runtime = __toESM(require_jsx_runtime());
var DisplayNameTypography = dt(Typography)`
  font-size: 2.4rem;
`;
var ProfileWidget = () => {
  var _a, _b;
  const user = useAuth("User", (state) => state.user);
  const userDisplayName = getDisplayName(user);
  const initials = getInitials(user);
  return (0, import_jsx_runtime.jsxs)(Flex, { direction: "column", gap: 3, height: "100%", justifyContent: "center", children: [
    (0, import_jsx_runtime.jsx)(Avatar.Item, { delayMs: 0, fallback: initials }),
    userDisplayName && (0, import_jsx_runtime.jsx)(DisplayNameTypography, { fontWeight: "bold", textTransform: "none", textAlign: "center", children: userDisplayName }),
    (user == null ? void 0 : user.email) && (0, import_jsx_runtime.jsx)(Typography, { variant: "omega", textColor: "neutral600", children: user == null ? void 0 : user.email }),
    ((_a = user == null ? void 0 : user.roles) == null ? void 0 : _a.length) && (0, import_jsx_runtime.jsx)(Flex, { marginTop: 2, gap: 1, wrap: "wrap", children: (_b = user == null ? void 0 : user.roles) == null ? void 0 : _b.map((role) => (0, import_jsx_runtime.jsx)(Badge, { children: role.name }, role.id)) })
  ] });
};
var Grid = dt(Box)`
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0;
  border: 1px solid ${({ theme }) => theme.colors.neutral200};
  border-radius: ${({ theme }) => theme.borderRadius};
  overflow: hidden;
`;
var GridCell = dt(Box)`
  border-bottom: 1px solid ${({ theme }) => theme.colors.neutral200};
  border-right: 1px solid ${({ theme }) => theme.colors.neutral200};
  display: flex;
  flex-direction: row;
  align-items: flex-start;

  &:nth-child(2n) {
    border-right: none;
  }
  &:nth-last-child(-n + 2) {
    border-bottom: none;
  }
`;
var formatNumber = ({ locale, number }) => {
  return new Intl.NumberFormat(locale, {
    notation: "compact",
    maximumFractionDigits: 1
  }).format(number);
};
var LinkCell = dt(Link)`
  text-decoration: none;
  padding: ${({ theme }) => theme.spaces[3]};
`;
var KeyStatisticsWidget = () => {
  const { trackUsage } = useTracking();
  const { formatMessage, locale } = useIntl();
  const { data: countDocuments, isLoading: isLoadingCountDocuments } = useGetCountDocumentsQuery();
  const { data: countKeyStatistics, isLoading: isLoadingKeyStatistics } = useGetKeyStatisticsQuery();
  if (isLoadingKeyStatistics || isLoadingCountDocuments) {
    return (0, import_jsx_runtime.jsx)(Widget.Loading, {});
  }
  if (!countKeyStatistics || !countDocuments) {
    return (0, import_jsx_runtime.jsx)(Widget.Error, {});
  }
  const keyStatisticsList = {
    entries: {
      label: {
        id: "widget.key-statistics.list.entries",
        defaultMessage: "Entries"
      },
      icon: {
        component: (0, import_jsx_runtime.jsx)(ForwardRef$3r, {}),
        background: "primary100",
        color: "primary600"
      },
      link: "/content-manager"
    },
    assets: {
      label: {
        id: "widget.key-statistics.list.assets",
        defaultMessage: "Assets"
      },
      icon: {
        component: (0, import_jsx_runtime.jsx)(ForwardRef$2N, {}),
        background: "warning100",
        color: "warning600"
      },
      link: "/plugins/upload"
    },
    contentTypes: {
      label: {
        id: "widget.key-statistics.list.contentTypes",
        defaultMessage: "Content-Types"
      },
      icon: {
        component: (0, import_jsx_runtime.jsx)(ForwardRef$2B, {}),
        background: "secondary100",
        color: "secondary600"
      },
      link: "/plugins/content-type-builder"
    },
    components: {
      label: {
        id: "widget.key-statistics.list.components",
        defaultMessage: "Components"
      },
      icon: {
        component: (0, import_jsx_runtime.jsx)(ForwardRef$3h, {}),
        background: "alternative100",
        color: "alternative600"
      },
      link: "/plugins/content-type-builder"
    },
    locales: {
      label: {
        id: "widget.key-statistics.list.locales",
        defaultMessage: "Locales"
      },
      icon: {
        component: (0, import_jsx_runtime.jsx)(ForwardRef$3X, {}),
        background: "success100",
        color: "success600"
      },
      link: "/settings/internationalization"
    },
    admins: {
      label: {
        id: "widget.key-statistics.list.admins",
        defaultMessage: "Admins"
      },
      icon: {
        component: (0, import_jsx_runtime.jsx)(ForwardRef$d, {}),
        background: "danger100",
        color: "danger600"
      },
      link: "/settings/users?pageSize=10&page=1&sort=firstname"
    },
    webhooks: {
      label: {
        id: "widget.key-statistics.list.webhooks",
        defaultMessage: "Webhooks"
      },
      icon: {
        component: (0, import_jsx_runtime.jsx)(ForwardRef$3, {}),
        background: "alternative100",
        color: "alternative600"
      },
      link: "/settings/webhooks"
    },
    apiTokens: {
      label: {
        id: "widget.key-statistics.list.apiTokens",
        defaultMessage: "API Tokens"
      },
      icon: {
        component: (0, import_jsx_runtime.jsx)(ForwardRef$2D, {}),
        background: "neutral100",
        color: "neutral600"
      },
      link: "/settings/api-tokens?sort=name:ASC"
    }
  };
  const { draft, published, modified } = countDocuments ?? {
    draft: 0,
    published: 0,
    modified: 0
  };
  const totalCountEntries = draft + published + modified;
  return (0, import_jsx_runtime.jsx)(Grid, { children: Object.entries(keyStatisticsList).map(([key, item]) => {
    const value = countKeyStatistics == null ? void 0 : countKeyStatistics[key];
    return value !== null && (0, import_jsx_runtime.jsx)(
      GridCell,
      {
        as: LinkCell,
        to: item.link,
        "data-testid": `stat-${key}`,
        onClick: () => trackUsage("didOpenKeyStatisticsWidgetLink", { itemKey: key }),
        children: (0, import_jsx_runtime.jsxs)(Flex, { alignItems: "center", gap: 2, children: [
          (0, import_jsx_runtime.jsx)(
            Flex,
            {
              padding: 2,
              borderRadius: 1,
              background: item.icon.background,
              color: item.icon.color,
              children: item.icon.component
            }
          ),
          (0, import_jsx_runtime.jsxs)(Flex, { direction: "column", alignItems: "flex-start", children: [
            (0, import_jsx_runtime.jsx)(Typography, { variant: "pi", fontWeight: "bold", textColor: "neutral500", children: formatMessage(item.label) }),
            (0, import_jsx_runtime.jsx)(Typography, { variant: "omega", fontWeight: "bold", textColor: "neutral800", children: formatNumber({
              locale,
              number: key === "entries" ? totalCountEntries : value
            }) })
          ] })
        ] })
      },
      `key-statistics-${key}`
    );
  }) });
};
export {
  KeyStatisticsWidget,
  ProfileWidget
};
//# sourceMappingURL=Widgets-MQCAMPA7.js.map
