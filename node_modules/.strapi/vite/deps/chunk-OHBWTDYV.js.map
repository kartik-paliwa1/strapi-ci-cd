{
  "version": 3,
  "sources": ["../../../../../packages/core/admin/admin/src/hooks/useEnterprise.ts"],
  "sourcesContent": ["import * as React from 'react';\n\nimport { useCallbackRef } from '@strapi/design-system';\n\nfunction isEnterprise() {\n  return window.strapi.isEE;\n}\n\nexport interface UseEnterpriseOptions<TCEData, TEEData, TDefaultValue, TCombinedValue> {\n  defaultValue?: TDefaultValue;\n  combine?: (ceData: TCEData, eeData: TEEData) => TCombinedValue;\n  enabled?: boolean;\n}\n\ntype UseEnterpriseReturn<TCEData, TEEData, TDefaultValue, TCombinedValue> =\n  TDefaultValue extends null\n    ? TCEData | TEEData | TCombinedValue | null\n    : TCEData | TEEData | TCombinedValue | TDefaultValue;\n\nexport const useEnterprise = <\n  TCEData,\n  TEEData = TCEData,\n  TCombinedValue = TEEData,\n  TDefaultValue = TCEData,\n>(\n  ceData: TCEData,\n  eeCallback: () => Promise<TEEData>,\n  opts: UseEnterpriseOptions<TCEData, TEEData, TDefaultValue, TCombinedValue> = {}\n): UseEnterpriseReturn<TCEData, TEEData, TDefaultValue, TCombinedValue> => {\n  const { defaultValue = null, combine = (_ceData, eeData) => eeData, enabled = true } = opts;\n  const eeCallbackRef = useCallbackRef(eeCallback);\n  const combineCallbackRef = useCallbackRef(combine);\n\n  // We have to use a nested object here, because functions (e.g. Components)\n  // can not be stored as value directly\n  const [{ data }, setData] = React.useState<{\n    data: TCEData | TEEData | TDefaultValue | TCombinedValue | null;\n  }>({\n    data: isEnterprise() && enabled ? defaultValue : ceData,\n  });\n\n  React.useEffect(() => {\n    async function importEE() {\n      const eeData = await eeCallbackRef();\n      const combinedValue = combineCallbackRef(ceData, eeData);\n\n      setData({ data: combinedValue ? combinedValue : eeData });\n    }\n\n    if (isEnterprise() && enabled) {\n      importEE();\n    }\n  }, [ceData, eeCallbackRef, combineCallbackRef, enabled]);\n\n  // @ts-expect-error â€“ the hook type assertion works in practice. But seems to have issues here...\n  return data;\n};\n"],
  "mappings": ";;;;;;;;;;;AAAA,YAAuB;AAIvB,SAAS,eAAe;AACtB,SAAO,OAAO,OAAO;AACvB;AAaO,IAAM,gBAAgB,CAM3B,QACA,YACA,OAA8E,CAAC,MACN;AACzE,QAAM,EAAE,eAAe,MAAM,UAAU,CAAC,SAAS,WAAW,QAAQ,UAAU,KAAK,IAAI;AACvF,QAAM,gBAAgB,eAAe,UAAU;AAC/C,QAAM,qBAAqB,eAAe,OAAO;AAIjD,QAAM,CAAC,EAAE,KAAK,GAAG,OAAO,IAAU,eAE/B;AAAA,IACD,MAAM,aAAa,KAAK,UAAU,eAAe;AAAA,EACnD,CAAC;AAED,EAAM,gBAAU,MAAM;AACpB,mBAAe,WAAW;AACxB,YAAM,SAAS,MAAM,cAAc;AACnC,YAAM,gBAAgB,mBAAmB,QAAQ,MAAM;AAEvD,cAAQ,EAAE,MAAM,gBAAgB,gBAAgB,OAAO,CAAC;AAAA,IAC1D;AAEA,QAAI,aAAa,KAAK,SAAS;AAC7B,eAAS;AAAA,IACX;AAAA,EACF,GAAG,CAAC,QAAQ,eAAe,oBAAoB,OAAO,CAAC;AAGvD,SAAO;AACT;",
  "names": []
}
