import {
  PrivateRoute
} from "./chunk-FF6Z3DLE.js";
import {
  LayoutContent,
  Logo,
  UnauthenticatedLayout
} from "./chunk-7R3IEP5O.js";
import "./chunk-DTPLHC4Y.js";
import "./chunk-HP6PMHBS.js";
import "./chunk-X755HR2R.js";
import "./chunk-BC6C3P2K.js";
import "./chunk-5RZ6LKW6.js";
import "./chunk-DJ2H7J6F.js";
import "./chunk-KYOQACZ3.js";
import "./chunk-GH6VCESI.js";
import {
  useAuth
} from "./chunk-Q5ERACUA.js";
import "./chunk-N64PMPD5.js";
import {
  useNotification
} from "./chunk-5BKV6XT7.js";
import {
  require_lib
} from "./chunk-ZOFH3G6M.js";
import "./chunk-T53VNMA3.js";
import "./chunk-NLF5ZJ7G.js";
import "./chunk-FFDAF6WU.js";
import "./chunk-LJ3JYJIM.js";
import "./chunk-SPCPB6JM.js";
import {
  Box,
  Button,
  Field,
  Flex,
  Main,
  SingleSelect,
  SingleSelectOption,
  TextButton,
  TextInput,
  Typography,
  useIntl
} from "./chunk-DOD64YWE.js";
import {
  useLocation,
  useNavigate
} from "./chunk-QOSJGLB6.js";
import "./chunk-47RN6QNY.js";
import "./chunk-UZEUHNNF.js";
import {
  require_jsx_runtime
} from "./chunk-GAPF2DTI.js";
import "./chunk-FJZ2NJT6.js";
import {
  require_react
} from "./chunk-2ZN62OJX.js";
import {
  __toESM
} from "./chunk-X6GFWOGJ.js";

// ../packages/core/admin/admin/src/pages/UseCasePage.tsx
var React = __toESM(require_react());
var import_qs = __toESM(require_lib());
var import_jsx_runtime = __toESM(require_jsx_runtime());
var options = [
  {
    intlLabel: {
      id: "Usecase.front-end",
      defaultMessage: "Front-end developer"
    },
    value: "front_end_developer"
  },
  {
    intlLabel: {
      id: "Usecase.back-end",
      defaultMessage: "Back-end developer"
    },
    value: "back_end_developer"
  },
  {
    intlLabel: {
      id: "Usecase.full-stack",
      defaultMessage: "Full-stack developer"
    },
    value: "full_stack_developer"
  },
  {
    intlLabel: {
      id: "global.content-manager",
      defaultMessage: "Content Manager"
    },
    value: "content_manager"
  },
  {
    intlLabel: {
      id: "Usecase.content-creator",
      defaultMessage: "Content Creator"
    },
    value: "content_creator"
  },
  {
    intlLabel: {
      id: "Usecase.other",
      defaultMessage: "Other"
    },
    value: "other"
  }
];
var UseCasePage = () => {
  const { toggleNotification } = useNotification();
  const location = useLocation();
  const navigate = useNavigate();
  const { formatMessage } = useIntl();
  const [role, setRole] = React.useState(null);
  const [otherRole, setOtherRole] = React.useState("");
  const { firstname, email } = useAuth("UseCasePage", (state) => state.user) ?? {};
  const { hasAdmin } = (0, import_qs.parse)(location.search, { ignoreQueryPrefix: true });
  const isOther = role === "other";
  const handleSubmit = async (event, skipPersona) => {
    event.preventDefault();
    try {
      await fetch(`${process.env.STRAPI_ANALYTICS_URL || "https://analytics.strapi.io"}/register`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          email,
          username: firstname,
          firstAdmin: Boolean(!hasAdmin),
          persona: {
            role: skipPersona ? void 0 : role,
            otherRole: skipPersona ? void 0 : otherRole
          }
        })
      });
      toggleNotification({
        type: "success",
        message: formatMessage({
          id: "Usecase.notification.success.project-created",
          defaultMessage: "Project has been successfully created"
        })
      });
      navigate("/");
    } catch (err) {
    }
  };
  return (0, import_jsx_runtime.jsx)(UnauthenticatedLayout, { children: (0, import_jsx_runtime.jsxs)(Main, { labelledBy: "usecase-title", children: [
    (0, import_jsx_runtime.jsx)(LayoutContent, { children: (0, import_jsx_runtime.jsxs)("form", { onSubmit: (e) => handleSubmit(e, false), children: [
      (0, import_jsx_runtime.jsxs)(Flex, { direction: "column", paddingBottom: 7, children: [
        (0, import_jsx_runtime.jsx)(Logo, {}),
        (0, import_jsx_runtime.jsx)(Box, { paddingTop: 6, paddingBottom: 1, width: `25rem`, children: (0, import_jsx_runtime.jsx)(Typography, { textAlign: "center", variant: "alpha", tag: "h1", id: "usecase-title", children: formatMessage({
          id: "Usecase.title",
          defaultMessage: "Tell us a bit more about yourself"
        }) }) })
      ] }),
      (0, import_jsx_runtime.jsxs)(Flex, { direction: "column", alignItems: "stretch", gap: 6, children: [
        (0, import_jsx_runtime.jsxs)(Field.Root, { name: "usecase", children: [
          (0, import_jsx_runtime.jsx)(Field.Label, { children: formatMessage({
            id: "Usecase.input.work-type",
            defaultMessage: "What type of work do you do?"
          }) }),
          (0, import_jsx_runtime.jsx)(SingleSelect, { onChange: (value) => setRole(value), value: role, children: options.map(({ intlLabel, value }) => (0, import_jsx_runtime.jsx)(SingleSelectOption, { value, children: formatMessage(intlLabel) }, value)) })
        ] }),
        isOther && (0, import_jsx_runtime.jsxs)(Field.Root, { name: "other", children: [
          (0, import_jsx_runtime.jsx)(Field.Label, { children: formatMessage({ id: "Usecase.other", defaultMessage: "Other" }) }),
          (0, import_jsx_runtime.jsx)(TextInput, { value: otherRole, onChange: (e) => setOtherRole(e.target.value) })
        ] }),
        (0, import_jsx_runtime.jsx)(Button, { type: "submit", size: "L", fullWidth: true, disabled: !role, children: formatMessage({ id: "global.finish", defaultMessage: "Finish" }) })
      ] })
    ] }) }),
    (0, import_jsx_runtime.jsx)(Flex, { justifyContent: "center", children: (0, import_jsx_runtime.jsx)(Box, { paddingTop: 4, children: (0, import_jsx_runtime.jsx)(
      TextButton,
      {
        onClick: (event) => handleSubmit(event, true),
        children: formatMessage({
          id: "Usecase.button.skip",
          defaultMessage: "Skip this question"
        })
      }
    ) }) })
  ] }) });
};
var PrivateUseCasePage = () => {
  return (0, import_jsx_runtime.jsx)(PrivateRoute, { children: (0, import_jsx_runtime.jsx)(UseCasePage, {}) });
};
export {
  PrivateUseCasePage,
  UseCasePage,
  options
};
//# sourceMappingURL=UseCasePage-O5EGWQAB.js.map
