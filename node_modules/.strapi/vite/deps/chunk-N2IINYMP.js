import {
  pluginId
} from "./chunk-T6YJK32F.js";
import {
  useMutation,
  useQuery
} from "./chunk-P4MW56JB.js";
import {
  useFetchClient
} from "./chunk-PZ6PIJ5R.js";
import {
  useTracking
} from "./chunk-X755HR2R.js";
import {
  useNotification
} from "./chunk-5BKV6XT7.js";
import {
  useIntl
} from "./chunk-DOD64YWE.js";

// ../packages/core/upload/admin/src/hooks/useConfig.ts
var endpoint = `/${pluginId}/configuration`;
var queryKey = [pluginId, "configuration"];
var useConfig = () => {
  const { trackUsage } = useTracking();
  const { formatMessage } = useIntl();
  const { toggleNotification } = useNotification();
  const { get, put } = useFetchClient();
  const config = useQuery(
    queryKey,
    async () => {
      const res = await get(endpoint);
      return res.data.data;
    },
    {
      onError() {
        return toggleNotification({
          type: "danger",
          message: formatMessage({ id: "notification.error" })
        });
      },
      /**
       * We're cementing that we always expect an object to be returned.
       */
      select: (data) => data || {}
    }
  );
  const putMutation = useMutation(
    async (body) => {
      await put(endpoint, body);
    },
    {
      onSuccess() {
        trackUsage("didEditMediaLibraryConfig");
        config.refetch();
      },
      onError() {
        return toggleNotification({
          type: "danger",
          message: formatMessage({ id: "notification.error" })
        });
      }
    }
  );
  return {
    config,
    mutateConfig: putMutation
  };
};

export {
  useConfig
};
//# sourceMappingURL=chunk-N2IINYMP.js.map
